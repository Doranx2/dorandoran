<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layouts/layout}">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<meta name="theme-color" content="#000000" />
	<title>admin page</title>
	
	<th:block layout:fragment="script">
		<script th:inline="javascript">
			function search() {
				let searchKeyword = $('#searchKeyword').val();
				console.log(searchKeyword);
				location.href = "#"
						+ searchKeyword;
			}
			
			// 삭제 클릭 시 -> 컨펌 후 -> 할 일 처리
			// 데이터베이스 에서 삭제 성공 시 1 을, 실패 시 0 을 반환받는다 이를 이용하여 삭제여부를 확인가능하다.
			// 1의 의미는 삭제처리된 row 의 개수
			function btnDel(noticeNo){
				// 컨펌 처리, 삭제 전에 한번더 확인
				if(confirm("공지를 정말 삭제하시겠습니까?") == true){
					location.href = '/admin/AdNoticeDelete?noticeNo=' + noticeNo;
				}else{
					return ;				}
			}

		</script>
	</th:block>
</head>
<body>
	<div layout:fragment="content">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css"/>
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Jua%3A400" />
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter%3A600%2C900" />
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro%3A400%2C600%2C900" />
	<link rel="stylesheet" th:href="@{/css/insertAdQnA.css}" />

	<div class="admin-page-iGN">
		<div class="admin-page-d8S">Admin Page</div>
		<div class="auto-group-rzws-hPC">
			<div class="auto-group-agdg-E8E">
				<div class="menu-YPp">
					<a href="/admin/getAdNoticeList" class="item--gW2">공지사항</a>
					<a href="/admin/getAdQnaList" class="item--gW2">1 : 1 문의</a>
					<a href="/admin/getAdReportList" class="item--S7p">신고관리</a>
					<a href="/admin/getAdUserList" class="item--Axv">회원관리</a>
				</div>
			</div>
				
				<div class="auto-group-ns3g-5KC">
					<div class="auto-group-hjpi-mhp">
						<div class="auto-group-uxyp-5yQ">
							<p class="item--1s4">1:1 문의 <span th:text="${formTitle != 'Registration' ? '수정' : '답변'}"></span></p>
						</div>
					</div>
						
						<form
						th:action="${formTitle != 'Registration' ? '/admin/AdAnswerUpdate' : '/admin/AdAnswerInsert'}"
						method="post"
						id="insertAdQnA"
						>
						<input type="hidden" name="qNo" id="qNo" th:value="${question.qNo}">
						<input type="hidden" name="aNo" id="aNo" th:value="${answer?.qNo}">
						<input type="hidden" name="inputDtm" id="inputDtm" th:value="${question.inputDtm}">
						
						<label for="qnaTitle">제목 </label>
						<input type="text" class="bg-light" id="qnaTitle" name="qnaTitle" th:field="${question.qTitle}" readonly>
						<br>
						
						<label for="userId">작성자</label>
						<input type="text" class="bg-light" id="userId" name="userId" th:field="${question.userNm}" readonly>
						
						<label for="anqAyn">답변여부</label>
						<input type="text" class="bg-light" id="anqAyn" name="anqAyn" th:field="${question.aYn}" readonly>
						<br>

						<label for="anqDate">문의일시</label>
						<input type="text" class="bg-light" id="anqDate" name="anqDate"
							th:value="${question.inputDtm eq null ? '' : #strings.substring(question.inputDtm, 0, 10)}" readonly>
						<br>
							
						<label for="qnaContent">내용</label>
						<textarea type="text" class="bg-light" id="qnaContent" name="qnaContent" th:field="${question.qContent}" readonly>
						</textarea>
						<br>
						
						<!-- 답변영역 -->
						<label for="userId">답변자</label>
						<input type="text" id="userId" name="userId" th:field="${loginUser.userId}" readonly>
						<br>
									
						<label for="aDate">답변일시</label>
						<input type="text" id="aDate" name="aDate"
							th:value="${answer.inputDtm eq null ? '' : #strings.substring(answer.inputDtm, 0, 10)}" readonly>
						<br>
						
						<label for="aContent">답변내용</label>
						<textarea id="aContent" name="aContent" th:value="*{answer.aContent}"
							th:text="*{answer.aContent}" required>
						</textarea>
						</th:block>
						
						<div class="btn-CRUD">
						<!--  and ${loginUser.userRole} == 'ADMIN' -->
						<button type="submit" class="btn-myButton"
							th:if="${formTitle} == 'Registration'">등록</button>
							&ensp;
						<button type="reset" class="btn-myButton"
							th:if="${formTitle} == 'Registration'">취소</button>
						
						<button type="submit" class="btn-myButton"
							th:if="${formTitle} == 'Modification'">수정</button>
							&ensp;
						<!-- <button type="button" class="btn-delete"
							th:if="${formTitle} == 'Modification'">
							<a href="javascript:void(0)" th:onclick="btnDel([[${noticeNo}]]);">삭제</a></button> -->
						</div>
					</form>
					
					</div>
				</div>
			</div>
		</div>
	</body>
</html>