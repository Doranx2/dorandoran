<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<meta name="theme-color" content="#000000" />
		<title>admin page</title>
		<link rel="stylesheet"
			href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css">
		<link rel="stylesheet"
			href="https://fonts.googleapis.com/css?family=Jua%3A400" />
		<link rel="stylesheet"
			href="https://fonts.googleapis.com/css?family=Inter%3A600%2C900" />
		<link rel="stylesheet"
			href="https://fonts.googleapis.com/css?family=Source+Sans+Pro%3A400%2C600%2C900" />
		<link rel="stylesheet" th:href="@{/css/insertAdNotice.css}" />
	</head>
	<body>
		<div class="admin-page-iGN">
			<div class="admin-page-d8S">Admin Page</div>
			<div class="auto-group-rzws-hPC">
				<div class="auto-group-agdg-E8E">
					<div class="menu-YPp">
						<a href="/admin/getAdNoticeList" class="item--gW2">공지사항</a> <a
							href="/admin/getAdFaqList" class="item-1-1--Kot">FAQ</a> <a
							href="/admin/getAdQnaList" class="item--gW2">1 : 1 문의</a> <a
							href="/admin/getAdReportList" class="item--S7p">신고관리</a>
						<!-- <a href="/admin/getAdMain" class="item--THp">게시글 관리</a> -->
						<a href="/admin/getAdUserList" class="item--Axv">회원관리</a>
					</div>
				</div>
				
				<div class="auto-group-ns3g-5KC">
					<div class="auto-group-hjpi-mhp">
						<div class="auto-group-uxyp-5yQ">
							<p class="item--1s4">공지사항 <span th:text="${formTitle != 'Registration' ? '수정' : '등록'}"></span></p>
						</div>
					</div>
					
					<!-- thymeleaf 문법 : 객체를 받을때는 "$", 사용할 때는 "*" -->
					<!-- 삼항연산자 구문을 사용하여 "등록" 시와 "수정" 시 액션 주소 다르게 처리 -->
					<form
						th:object="${noticeDTO}"
						th:action="${formTitle != 'Registration' ? '/admin/AdNoticeUpdate' : '/admin/AdNoticeInsert'}"
						method="post"
						id="insertAdNotice"
					>
					
					<!-- 아래 noticeNo 값은 수정에만 필요하므로 th:if 를 사용하여 수정에만 noticeNo 값을 받도록 한다  -->
						<input type="hidden" name="noticeNo" th:if="${formTitle} == 'Modification'" th:value="${noticeNo}">
						
						<label for="noticeTitle">제목 </label>
						<!-- name 값을 DTO 메소드명과 일치시켜야 자동으로 데이터가 객체로 저장된다 -->
						<input type="text" id="noticeTitle" name="noticeTitle" th:field="*{noticeTitle}" required>
						<br>
						
						<label for="userId">작성자</label>
						<input type="text" id="userId" name="userId" th:field="*{userId}" required>
						<br>
						
						<label for="noticeContent" class="noticeContent">내용</label>
						<textarea id="noticeContent" name="noticeContent" th:value="*{noticeContent}"
							th:text="*{noticeContent}" required></textarea>
						<br><br>
						
						<div class="btn-CRUD">
						<button type="submit" class="btn-myButton"
							th:if="${formTitle} == 'Registration'">등록</button>
							&ensp;
						<button type="reset" class="btn-myButton"
							th:if="${formTitle} == 'Registration'">취소</button>
						
						<button type="submit" class="btn-myButton"
							th:if="${formTitle} == 'Modification'">수정</button>
							&ensp;
						<button type="button" class="btn-delete"
							th:if="${formTitle} == 'Modification'">
							<a href="javascript:void(0)" th:onclick="btnDel([[${noticeNo}]]);">삭제</a></button>
						</div>
					</form>
				</div>
			</div>
		</div>
		<script>
		// 삭제 클릭 시 -> 컨펌 후 -> 할 일 처리
		// 데이터베이스 에서 삭제 성공 시 1 을, 실패 시 0 을 반환받는다 이를 이용하여 삭제여부를 확인가능하다.
		// 1의 의미는 삭제처리된 row 의 개수
		function btnDel(noticeNo){
			// 컨펌 처리, 삭제 전에 한번더 확인
			if(confirm("공지를 정말 삭제하시겠습니까?") == true){
				location.href = '/admin/AdNoticeDelete?noticeNo=' + noticeNo;
			}else{
				return ;				}
		}
		</script>
	</body>
</html>